Q:

å¥½çš„æˆ‘æœ‰äº†æ•´ä½“çš„è®¤è¯†ï¼Œç°åœ¨è®©æˆ‘ä»¬ä¸“æ³¨äºæ ¸å¿ƒæ•°æ®ç»“æ„è®¾è®¡ã€‚å› ä¸ºæ•°æ®æ˜¯éœ€è¦ä¿å­˜åˆ°åç«¯çš„ï¼Œæ‰€ä»¥ç»™æˆ‘ä¸€ä¸ªæ¡ˆä¾‹æ•°æ®æ¥è¡¨ç¤ºå¤šç»´è¡¨æ ¼æœ¬èº«ï¼ŒåŒ…æ‹¬æ ¸å¿ƒæ•°æ®ã€è¡¨æ ¼è§†å›¾æ•°æ®ã€‚å…ˆä¸è€ƒè™‘å…¶ä»–è§†å›¾

A:

å¥½çš„ï¼Œæˆ‘ä»¬æ¥æ„å»ºä¸€ä¸ªJSONæ¡ˆä¾‹æ•°æ®ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªåŒ…å«æ ¸å¿ƒæ•°æ®å’Œå•ä¸€è¡¨æ ¼è§†å›¾é…ç½®çš„å¤šç»´è¡¨æ ¼ã€‚è¿™ä¸ªç»“æ„åº”è¯¥å¯ä»¥ç›´æ¥ä¿å­˜åˆ°åç«¯æ•°æ®åº“ï¼ˆä¾‹å¦‚ NoSQL æ•°æ®åº“å¦‚ MongoDBï¼Œæˆ–è€…å…³ç³»å‹æ•°æ®åº“ä¸­çš„ JSON åˆ—ï¼‰ã€‚

**åœºæ™¯ï¼šä¸€ä¸ªç®€å•çš„ "ä»»åŠ¡åˆ—è¡¨" å¤šç»´è¡¨æ ¼**

æˆ‘ä»¬å°†åŒ…å«ä»¥ä¸‹å±æ€§ï¼š

1.  **ä»»åŠ¡åç§°** (Text, ä¸»å±æ€§)
2.  **çŠ¶æ€** (Select: To Do, In Progress, Done)
3.  **æˆªæ­¢æ—¥æœŸ** (Date)
4.  **è´Ÿè´£äºº** (Text - ç®€åŒ–ï¼Œå®é™…å¯èƒ½æ˜¯ Person ç±»å‹)
5.  **ä¼˜å…ˆçº§** (Select: High, Medium, Low)
6.  **å®Œæˆ** (Checkbox)

ç„¶åæ˜¯å‡ æ¡ä»»åŠ¡æ•°æ®ï¼Œä»¥åŠä¸€ä¸ªè¡¨æ ¼è§†å›¾çš„é…ç½®ã€‚

```json
{
  "database": {
    "id": "db_project_alpha_tasks", // æ•°æ®åº“å”¯ä¸€ID
    "name": "Project Alpha Tasks",
    "icon": "ğŸ“‹", // Emoji or URL
    "coverImage": null,
    "propertyDefinitions": [
      {
        "id": "prop_title", // å±æ€§å”¯ä¸€ID
        "name": "Task Name",
        "type": "text",
        "description": "The main name or title of the task."
      },
      {
        "id": "prop_status",
        "name": "Status",
        "type": "select",
        "options": [
          { "id": "opt_status_todo", "name": "To Do", "color": "grey" },
          { "id": "opt_status_inprogress", "name": "In Progress", "color": "blue" },
          { "id": "opt_status_done", "name": "Done", "color": "green" }
        ]
      },
      {
        "id": "prop_duedate",
        "name": "Due Date",
        "type": "date",
        "dateFormat": "YYYY-MM-DD" // å¯é€‰ï¼Œç”¨äºå‰ç«¯å±•ç¤ºå’Œç¼–è¾‘
      },
      {
        "id": "prop_assignee",
        "name": "Assignee",
        "type": "text" // ç®€åŒ–ï¼Œå®é™…å¯èƒ½ä¸º 'person'
      },
      {
        "id": "prop_priority",
        "name": "Priority",
        "type": "select",
        "options": [
          { "id": "opt_priority_high", "name": "High", "color": "red" },
          { "id": "opt_priority_medium", "name": "Medium", "color": "orange" },
          { "id": "opt_priority_low", "name": "Low", "color": "yellow" }
        ]
      },
      {
        "id": "prop_completed",
        "name": "Completed",
        "type": "checkbox"
      }
    ],
    "items": [
      {
        "id": "item_task_001", // æ•°æ®é¡¹å”¯ä¸€ID
        "properties": {
          "prop_title": "Design new homepage layout",
          "prop_status": "opt_status_inprogress", // å­˜å‚¨ SelectOption çš„ id
          "prop_duedate": "2024-03-15", // ISO 8601 æ ¼å¼æˆ–æŒ‡å®šæ ¼å¼
          "prop_assignee": "Alice Wonderland",
          "prop_priority": "opt_priority_high",
          "prop_completed": false
        },
        "createdAt": "2024-02-20T10:00:00Z",
        "updatedAt": "2024-02-28T14:30:00Z"
      },
      {
        "id": "item_task_002",
        "properties": {
          "prop_title": "Develop API endpoints for user authentication",
          "prop_status": "opt_status_todo",
          "prop_duedate": "2024-03-25",
          "prop_assignee": "Bob The Builder",
          "prop_priority": "opt_priority_medium",
          "prop_completed": false
        },
        "createdAt": "2024-02-22T11:00:00Z",
        "updatedAt": "2024-02-22T11:00:00Z"
      },
      {
        "id": "item_task_003",
        "properties": {
          "prop_title": "Write user documentation",
          "prop_status": "opt_status_done",
          "prop_duedate": "2024-03-01",
          "prop_assignee": "Carol Danvers",
          "prop_priority": "opt_priority_low",
          "prop_completed": true
        },
        "createdAt": "2024-02-15T09:00:00Z",
        "updatedAt": "2024-03-01T16:00:00Z"
      },
      {
        "id": "item_task_004",
        "properties": {
          "prop_title": "Setup CI/CD pipeline",
          "prop_status": "opt_status_todo",
          "prop_duedate": null, // å…è®¸æ—¥æœŸä¸ºç©º
          "prop_assignee": "Bob The Builder",
          "prop_priority": null, // å…è®¸é€‰æ‹©ä¸ºç©º
          "prop_completed": false
        },
        "createdAt": "2024-03-02T15:00:00Z",
        "updatedAt": "2024-03-02T15:00:00Z"
      }
    ],
    "views": [ // æ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªè§†å›¾
      {
        "id": "view_table_default", // è§†å›¾å”¯ä¸€ID
        "name": "All Tasks (Table View)",
        "type": "table", // è§†å›¾ç±»å‹
        "databaseId": "db_project_alpha_tasks", // æŒ‡å‘æ‰€å±æ•°æ®åº“
        "filters": { // ç­›é€‰æ¡ä»¶ (å¯é€‰)
          "operator": "AND", // "AND" æˆ– "OR"
          "conditions": [
            {
              "propertyId": "prop_status",
              "operator": "is_not", // ä¾‹å¦‚: is, is_not, contains, etc.
              "value": "opt_status_done" // å€¼ä¸å±æ€§ç±»å‹ç›¸å…³
            }
            // å¯ä»¥æœ‰æ›´å¤šæ¡ä»¶æˆ–åµŒå¥—çš„ FilterGroup
          ]
        },
        "sorts": [ // æ’åºè§„åˆ™ (å¯é€‰)
          {
            "propertyId": "prop_priority", // æŒ‰ä¼˜å…ˆçº§æ’åº
            "direction": "ascending" // "ascending" æˆ– "descending"
                             // æ³¨æ„ï¼šå¯¹äº Select ç±»å‹ï¼Œ"ascending" å¯èƒ½æ„å‘³ç€æŒ‰é€‰é¡¹å®šä¹‰çš„é¡ºåº
                             // æˆ–è€…ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªæ›´å¤æ‚çš„æ’åºé€»è¾‘ï¼Œä¾‹å¦‚å®šä¹‰é€‰é¡¹çš„æ•°å€¼æƒé‡
          },
          {
            "propertyId": "prop_duedate", // å…¶æ¬¡æŒ‰æˆªæ­¢æ—¥æœŸæ’åº
            "direction": "ascending"
          }
        ],
        // è¡¨æ ¼è§†å›¾ç‰¹å®šé…ç½®
        "visiblePropertyIds": [ // æ˜¾ç¤ºå“ªäº›åˆ—åŠå…¶é¡ºåº
          "prop_completed",
          "prop_title",
          "prop_status",
          "prop_assignee",
          "prop_duedate",
          "prop_priority"
        ],
        "columnWidths": { // åˆ—å®½é…ç½® (å¯é€‰)
          "prop_title": 300, // px
          "prop_status": 150,
          "prop_assignee": 180,
          "prop_duedate": 120,
          "prop_completed": 50,
          "prop_priority": 100
          // æœªæŒ‡å®šçš„åˆ—å¯ä»¥ä½¿ç”¨é»˜è®¤å®½åº¦æˆ– 'auto'
        },
        "wrapCells": false // å•å…ƒæ ¼å†…å®¹æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ (å¯é€‰)
      }
      // æœªæ¥å¯ä»¥æ·»åŠ å…¶ä»–è§†å›¾é…ç½®ï¼Œå¦‚çœ‹æ¿ã€æ—¥å†ç­‰
      // {
      //   "id": "view_board_status",
      //   "name": "Tasks by Status (Board View)",
      //   "type": "board",
      //   ... (çœ‹æ¿è§†å›¾ç‰¹å®šé…ç½®)
      // }
    ]
  }
}
```

**å…³é”®ç‚¹è¯´æ˜ï¼š**

1.  **é¡¶çº§å¯¹è±¡ `database`**: åŒ…å«äº†è¿™ä¸ªå¤šç»´è¡¨æ ¼çš„æ‰€æœ‰ä¿¡æ¯ã€‚
2.  **`propertyDefinitions`**: å®šä¹‰äº†æ•°æ®ç»“æ„ï¼ˆåˆ—çš„å…ƒæ•°æ®ï¼‰ã€‚æ¯ä¸ªå±æ€§æœ‰ `id`, `name`, `type`ï¼Œä»¥åŠç‰¹å®šäºç±»å‹çš„é€‰é¡¹ï¼ˆå¦‚ `select` ç±»å‹çš„ `options`ï¼‰ã€‚
3.  **`items`**: å®é™…çš„æ•°æ®è¡Œã€‚æ¯ä¸ª `item` æœ‰ä¸€ä¸ª `id` å’Œä¸€ä¸ª `properties` å¯¹è±¡ã€‚
4.  **`item.properties`**: è¿™æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®æ˜¯ `PropertyDefinition` çš„ `id` (ä¾‹å¦‚ `"prop_title"`), å€¼æ˜¯è¯¥å±æ€§çš„å®é™…æ•°æ®ã€‚
    *   å¯¹äº `select` ç±»å‹ï¼Œå­˜å‚¨çš„æ˜¯ `SelectOption` çš„ `id`ã€‚
    *   å¯¹äº `date` ç±»å‹ï¼Œå»ºè®®å­˜å‚¨ ISO 8601 æ ¼å¼çš„å­—ç¬¦ä¸² (`YYYY-MM-DD` æˆ– `YYYY-MM-DDTHH:mm:ssZ`)ï¼Œä¾¿äºè§£æå’Œè·¨æ—¶åŒºå¤„ç†ã€‚
    *   å¯¹äº `checkbox` ç±»å‹ï¼Œå­˜å‚¨å¸ƒå°”å€¼ã€‚
5.  **`views`**: ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªè§†å›¾ã€‚
6.  **`TableViewConfig` (è§†å›¾å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹)**:
    *   **`type: "table"`**: æ˜ç¡®æ˜¯è¡¨æ ¼è§†å›¾ã€‚
    *   **`filters` å’Œ `sorts`**: å®šä¹‰äº†æ•°æ®çš„ç­›é€‰å’Œæ’åºé€»è¾‘ï¼Œè¿™äº›é€»è¾‘ç”±å‰ç«¯åœ¨æ¸²æŸ“å‰åº”ç”¨åˆ° `database.items` ä¸Šã€‚
    *   **`visiblePropertyIds`**: å†³å®šäº†å“ªäº›åˆ—åœ¨è¡¨æ ¼ä¸­æ˜¾ç¤ºä»¥åŠå®ƒä»¬çš„é¡ºåºã€‚
    *   **`columnWidths`**: å¯é€‰ï¼Œç”¨äºæŒä¹…åŒ–ç”¨æˆ·è°ƒæ•´çš„åˆ—å®½ã€‚
7.  **ID çš„é‡è¦æ€§**:
    *   `database.id`, `propertyDefinition.id`, `item.id`, `view.id`, `selectOption.id` éƒ½åº”è¯¥æ˜¯å”¯ä¸€çš„ï¼Œä»¥ä¾¿äºå¼•ç”¨å’Œæ›´æ–°ã€‚
    *   åœ¨ `filters`, `sorts`, `visiblePropertyIds`, `columnWidths` ä»¥åŠ `item.properties` ä¸­ï¼Œéƒ½æ˜¯é€šè¿‡ `propertyDefinition.id` æ¥å¼•ç”¨å±æ€§çš„ã€‚
    *   åœ¨ `item.properties` ä¸­ï¼Œ`select` ç±»å‹çš„å€¼æ˜¯ `selectOption.id`ã€‚

è¿™ä¸ª JSON ç»“æ„åœ¨è®¾è®¡ä¸Šè€ƒè™‘äº†ï¼š

*   **å¯æ‰©å±•æ€§**: å®¹æ˜“æ·»åŠ æ–°çš„å±æ€§ç±»å‹ã€æ–°çš„è§†å›¾ç±»å‹ã€‚
*   **å…³ç³»æ¸…æ™°**: æ•°æ®ã€å±æ€§å®šä¹‰ã€è§†å›¾é…ç½®ä¹‹é—´çš„å…³ç³»æ˜ç¡®ã€‚
*   **åç«¯å‹å¥½**: ç»“æ„åŒ–æ•°æ®ï¼Œé€‚åˆå­˜å‚¨å’ŒæŸ¥è¯¢ã€‚
*   **å‰ç«¯æ¶ˆè´¹**: å‰ç«¯å¯ä»¥è·å–æ•´ä¸ª `database` å¯¹è±¡ï¼Œç„¶åæ ¹æ®å½“å‰æ¿€æ´»çš„ `view` é…ç½®æ¥ç­›é€‰ã€æ’åºå’Œæ¸²æŸ“æ•°æ®ã€‚

å½“ä½ å¼€å§‹å®ç°å…¶ä»–è§†å›¾ï¼ˆå¦‚çœ‹æ¿ï¼‰æ—¶ï¼Œåªéœ€åœ¨ `views` æ•°ç»„ä¸­æ·»åŠ æ–°çš„è§†å›¾å¯¹è±¡ï¼Œå…¶ `type` å±æ€§ä¼šä¸åŒ (å¦‚ `"board"`), å¹¶ä¸”ä¼šåŒ…å«è¯¥è§†å›¾ç±»å‹ç‰¹æœ‰çš„é…ç½®é¡¹ (å¦‚çœ‹æ¿è§†å›¾çš„ `groupByPropertyId`)ã€‚